language: rust
rust:
  - nightly
cache: cargo
sudo: false
install:
  - ./build_utils/googletest.sh
  - ./build_utils/libhdfs3.sh

before_script:
  - export PATH=$HOME/.cargo/bin:$PATH
  - cargo install cargo-update || echo "cargo-update already installed"
  - cargo install cargo-travis || echo "cargo-travis already installed"
  - cargo install-update -a

script:
  - cargo build --verbose --all
  - cargo test --verbose --all
  - rustdoc --test readme.md -L target

after_success:
  - cargo coveralls --all

notifications:
  email:
    on_success: never
addons:
  apt:
    packages:
      - cmake
      - libssl-dev
      - libgtest-dev
      - libboost-dev
      - libxml2-dev
      - libkrb5-dev
      - libgsasl7-dev
      - uuid-dev
      - libprotobuf-dev
      - protobuf-compiler
      - libcurl4-openssl-dev
      - libelf-dev
      - libdw-dev
      - binutils-dev
    sources:
      - kalakris-cmake
